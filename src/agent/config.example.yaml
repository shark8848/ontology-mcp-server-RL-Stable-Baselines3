# Agent 配置示例文件
# 复制此文件为 config.yaml 并修改配置

# ========================================
# LLM 配置
# ========================================
LLM_PROVIDER: deepseek   # deepseek | ollama
OPENAI_API_URL: https://api.deepseek.com/v1
OPENAI_API_KEY: your-api-key-here
OPENAI_MODEL: deepseek-chat

# 可选：Ollama 本地模型默认值（仅在 LLM_PROVIDER=ollama 时使用，可按需覆盖）
OLLAMA_API_URL: http://localhost:11434/v1
OLLAMA_MODEL: qwen3:8b
OLLAMA_API_KEY: ollama
# 可选：设置 MCP 地址（MCP 服务地址）
MCP_BASE_URL: http://localhost:8000

# UI 日志显示配置
ui:
  # 工具调用面板最长展示字符数
  tool_log_max_chars: 8000
  # 执行日志摘要截断长度
  execution_log_snippet_chars: 1200

# ========================================
# 对话记忆配置
# ========================================
memory:
  # 是否启用记忆功能
  enabled: true
  
  # 记忆后端类型: "chromadb" (推荐) 或 "basic" (简单内存)
  backend: "chromadb"
  
  # ChromaDB 配置
  chromadb:
    # 持久化存储目录 (相对于项目根目录)
    persist_directory: "data/chroma_memory"
    # Collection 名称
    collection_name: "conversation_memory"
    # 嵌入模型名称 (all-MiniLM-L6-v2 是轻量级且效果好的模型)
    embedding_model: "all-MiniLM-L6-v2"
  
  # 记忆使用策略
  strategy:
    # 上下文检索方式:
    #   - "recent": 返回最近的 N 条对话记录 (速度快, 适合短期对话)
    #   - "similarity": 基于语义相似度检索相关对话 (智能但稍慢, 适合长对话)
    retrieval_mode: "recent"
    
    # 最近模式: 返回最近的 N 条记录
    max_recent_turns: 10
    
    # 相似度模式配置
    max_similarity_results: 5      # 返回最相似的 N 条记录
    similarity_threshold: 0.5       # 相似度阈值 (0-1, 越高越严格)
    
    # 是否启用 LLM 摘要生成 (需要额外 LLM 调用, 适合长对话压缩)
    enable_llm_summary: true
    
    # 摘要生成策略
    summary:
      # 触发条件:
      #   - "always": 每轮对话都生成摘要
      #   - "threshold": 超过阈值时生成摘要
      #   - "manual": 仅手动调用
      trigger: "threshold"
      # 对话轮数阈值
      turns_threshold: 10
      # 文本长度阈值(字符数)
      text_length_threshold: 500
      # 摘要最大长度(字符数)
      max_summary_length: 200
  
  # 会话管理
  session:
    # 默认会话ID前缀
    default_session_prefix: "session"
    # 会话超时时间(秒), 0表示永不超时
    timeout: 0
    # 是否自动清理过期会话
    auto_cleanup: false
  
  # 性能优化
  performance:
    # 是否启用内存缓存 (加速重复访问)
    enable_cache: true
    # 缓存最大条目数
    cache_size: 1000000
    # 批量操作大小
    batch_size: 10

# ========================================
# 使用建议
# ========================================
# 
# 1. 短期对话场景 (客服、FAQ):
#    - retrieval_mode: "recent"
#    - max_recent_turns: 5-10
#    - enable_llm_summary: false
# 
# 2. 长期对话场景 (个人助理、项目协作):
#    - retrieval_mode: "similarity"
#    - max_similarity_results: 5-10
#    - similarity_threshold: 0.5-0.7
#    - enable_llm_summary: true
# 
# 3. 高性能要求:
#    - backend: "basic"
#    - enable_cache: true
# 
# 4. 离线或低资源环境:
#    - backend: "basic"
#    - enable_llm_summary: false
